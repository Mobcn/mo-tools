var c=Object.defineProperty;var l=(n,r,t)=>r in n?c(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t;var i=(n,r,t)=>l(n,typeof r!="symbol"?r+"":r,t);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();class BaseElement extends HTMLElement{constructor(t,e){super();i(this,"watchAttributeMap",new Map);this.attachShadow(e??{mode:"open"}),this.shadowRoot.innerHTML=t??"<style></style><slot></slot>",this.setStyle(":host{display:block;}");const o=this.watchAttribute();for(const s in o)this.watchAttributeMap.set(s,[o[s]])}static get observedAttributes(){return this.properties}connectedCallback(){}disconnectedCallback(){}adoptedCallback(){}attributeChangedCallback(t,e,o){e!==o&&this.watchAttributeMap.has(t)&&this.watchAttributeMap.get(t).forEach(s=>s(o,e))}watchAttribute(){return{}}setStyle(t,e=!1){let o=this.shadowRoot.querySelector("style");o||(o=document.createElement("style"),this.shadowRoot.appendChild(o)),o.innerHTML=e?o.innerHTML+`
`+t:t}addStyle(t){this.setStyle(t,!0)}}i(BaseElement,"properties",[]);const editorVS="https://cdn.staticfile.net/monaco-editor/0.36.1/min/vs",editorLoader=editorVS+"/loader.js",monacoAsync=fetch(editorLoader).then(n=>n.text()).then(textJS=>(textJS=textJS.replace("var h=do","//var h=do"),textJS=textJS.replace("d(h)",`d(h)
fetch(r).then(d=>d.text()).then(t=>eval(t))`),eval(`new Promise((rev) => ({
                execFun: function () {
                    ${textJS};
                    this.require.config({paths:{vs:'${editorVS}'}});
                    this.require(['vs/editor/editor.main'],()=>rev(monaco));
                }
            }).execFun())`))),MoEditor={useMonaco:n=>{monacoAsync.then(r=>n(r))},create:(n,r,t,e)=>MoEditor.useMonaco(o=>e(o.editor.create(n,r,t))),setTheme:n=>MoEditor.useMonaco(r=>r.editor.setTheme(n))};class ESEditor extends BaseElement{constructor(){super(...arguments);i(this,"editorInstance",null)}watchAttribute(){return{value:t=>{var e;(e=this.editorInstance)==null||e.setValue(t)},width:t=>{var e;this.addStyle(`:host{width:${t}}`),(e=this.editorInstance)==null||e.layout()},height:t=>{var e;this.addStyle(`:host{height:${t}}`),(e=this.editorInstance)==null||e.layout()},sx:t=>{var e;this.addStyle(`:host{${t}}`),(e=this.editorInstance)==null||e.layout()},readonly:t=>{var e;(e=this.editorInstance)==null||e.updateOptions({readOnly:t!=null})}}}connectedCallback(){MoEditor.create(this,{value:this.getAttribute("value"),language:"javascript",minimap:{enabled:!1},theme:"vs-dark",readOnly:this.getAttribute("readonly")!=null},null,t=>{this.editorInstance=t,this.editorInstance.onDidChangeModelContent(()=>{this.value=this.editorInstance.getValue()})})}}i(ESEditor,"properties",["width","height","value","readonly","sx"]);window.customElements.define("es-editor",ESEditor);const[input,output]=document.querySelectorAll("es-editor"),loadInterval=setInterval(()=>{input.editorInstance&&(clearInterval(loadInterval),transformByBabel(1e3))},100);function transformByBabel(n){let r=Date.now()+n;input.editorInstance.onDidChangeModelContent(()=>{if(r<=Date.now()){const t=setInterval(()=>{if(r<=Date.now()){clearInterval(t);try{const e=Babel.transform(input.value,{presets:["env","react"]}).code;output.setAttribute("value",e)}catch{}}},n)}r=Date.now()+n})}
