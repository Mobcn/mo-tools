(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}})();const ie=(e,s)=>e===s,O={equals:ie};let re=te;const S=1,U=2,X={owned:null,cleanups:null,context:null,owner:null};var b=null;let F=null,oe=null,d=null,m=null,A=null,R=0;function ae(e,s){const t=d,n=b,l=e.length===0,i=s===void 0?n:s,o=l?X:{owned:null,cleanups:null,context:i?i.context:null,owner:i},r=l?e:()=>e(()=>G(()=>H(o)));b=o,d=null;try{return T(r,!0)}finally{d=t,b=n}}function q(e,s){s=s?Object.assign({},O,s):O;const t={value:e,observers:null,observerSlots:null,comparator:s.equals||void 0},n=l=>(typeof l=="function"&&(l=l(t.value)),Y(t,l));return[J.bind(t),n]}function x(e,s,t){const n=Z(e,s,!1,S);P(n)}function V(e,s,t){t=t?Object.assign({},O,t):O;const n=Z(e,s,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,P(n),J.bind(n)}function G(e){if(d===null)return e();const s=d;d=null;try{return e()}finally{d=s}}function J(){if(this.sources&&this.state)if(this.state===S)P(this);else{const e=m;m=null,T(()=>B(this),!1),m=e}if(d){const e=this.observers?this.observers.length:0;d.sources?(d.sources.push(this),d.sourceSlots.push(e)):(d.sources=[this],d.sourceSlots=[e]),this.observers?(this.observers.push(d),this.observerSlots.push(d.sources.length-1)):(this.observers=[d],this.observerSlots=[d.sources.length-1])}return this.value}function Y(e,s,t){let n=e.value;return(!e.comparator||!e.comparator(n,s))&&(e.value=s,e.observers&&e.observers.length&&T(()=>{for(let l=0;l<e.observers.length;l+=1){const i=e.observers[l],o=F&&F.running;o&&F.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?m.push(i):A.push(i),i.observers&&se(i)),o||(i.state=S)}if(m.length>1e6)throw m=[],new Error},!1)),s}function P(e){if(!e.fn)return;H(e);const s=R;ce(e,e.value,s)}function ce(e,s,t){let n;const l=b,i=d;d=b=e;try{n=e.fn(s)}catch(o){return e.pure&&(e.state=S,e.owned&&e.owned.forEach(H),e.owned=null),e.updatedAt=t+1,ne(o)}finally{d=i,b=l}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?Y(e,n):e.value=n,e.updatedAt=t)}function Z(e,s,t,n=S,l){const i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:s,owner:b,context:b?b.context:null,pure:t};return b===null||b!==X&&(b.owned?b.owned.push(i):b.owned=[i]),i}function ee(e){if(e.state===0)return;if(e.state===U)return B(e);if(e.suspense&&G(e.suspense.inFallback))return e.suspense.effects.push(e);const s=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<R);)e.state&&s.push(e);for(let t=s.length-1;t>=0;t--)if(e=s[t],e.state===S)P(e);else if(e.state===U){const n=m;m=null,T(()=>B(e,s[0]),!1),m=n}}function T(e,s){if(m)return e();let t=!1;s||(m=[]),A?t=!0:A=[],R++;try{const n=e();return ue(t),n}catch(n){t||(A=null),m=null,ne(n)}}function ue(e){if(m&&(te(m),m=null),e)return;const s=A;A=null,s.length&&T(()=>re(s),!1)}function te(e){for(let s=0;s<e.length;s++)ee(e[s])}function B(e,s){e.state=0;for(let t=0;t<e.sources.length;t+=1){const n=e.sources[t];if(n.sources){const l=n.state;l===S?n!==s&&(!n.updatedAt||n.updatedAt<R)&&ee(n):l===U&&B(n,s)}}}function se(e){for(let s=0;s<e.observers.length;s+=1){const t=e.observers[s];t.state||(t.state=U,t.pure?m.push(t):A.push(t),t.observers&&se(t))}}function H(e){let s;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),l=t.observers;if(l&&l.length){const i=l.pop(),o=t.observerSlots.pop();n<l.length&&(i.sourceSlots[o]=n,l[n]=i,t.observerSlots[n]=o)}}if(e.owned){for(s=e.owned.length-1;s>=0;s--)H(e.owned[s]);e.owned=null}if(e.cleanups){for(s=e.cleanups.length-1;s>=0;s--)e.cleanups[s]();e.cleanups=null}e.state=0}function fe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ne(e,s=b){throw fe(e)}function N(e,s){return G(()=>e(s||{}))}function he(e,s,t){let n=t.length,l=s.length,i=n,o=0,r=0,h=s[l-1].nextSibling,p=null;for(;o<l||r<i;){if(s[o]===t[r]){o++,r++;continue}for(;s[l-1]===t[i-1];)l--,i--;if(l===o){const w=i<n?r?t[r-1].nextSibling:t[i-r]:h;for(;r<i;)e.insertBefore(t[r++],w)}else if(i===r)for(;o<l;)(!p||!p.has(s[o]))&&s[o].remove(),o++;else if(s[o]===t[i-1]&&t[r]===s[l-1]){const w=s[--l].nextSibling;e.insertBefore(t[r++],s[o++].nextSibling),e.insertBefore(t[--i],w),s[l]=t[i]}else{if(!p){p=new Map;let g=r;for(;g<i;)p.set(t[g],g++)}const w=p.get(s[o]);if(w!=null)if(r<w&&w<i){let g=o,a=1,v;for(;++g<l&&g<i&&!((v=p.get(s[g]))==null||v!==w+a);)a++;if(a>w-r){const C=s[o];for(;r<w;)e.insertBefore(t[r++],C)}else e.replaceChild(t[r++],s[o++])}else o++;else s[o++].remove()}}}const k="_$DX_DELEGATE";function de(e,s,t,n={}){let l;return ae(i=>{l=i,s===document?e():y(s,e(),s.firstChild?null:void 0,t)},n.owner),()=>{l(),s.textContent=""}}function $(e,s,t){let n;const l=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},i=()=>(n||(n=l())).cloneNode(!0);return i.cloneNode=i,i}function le(e,s=window.document){const t=s[k]||(s[k]=new Set);for(let n=0,l=e.length;n<l;n++){const i=e[n];t.has(i)||(t.add(i),s.addEventListener(i,pe))}}function D(e,s,t){t==null?e.removeAttribute(s):e.setAttribute(s,t)}function K(e,s,t,n){Array.isArray(t)?(e[`$$${s}`]=t[0],e[`$$${s}Data`]=t[1]):e[`$$${s}`]=t}function y(e,s,t,n){if(t!==void 0&&!n&&(n=[]),typeof s!="function")return I(e,s,n,t);x(l=>I(e,s(),l,t),n)}function pe(e){const s=`$$${e.type}`;let t=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==t&&Object.defineProperty(e,"target",{configurable:!0,value:t}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}});t;){const n=t[s];if(n&&!t.disabled){const l=t[`${s}Data`];if(l!==void 0?n.call(t,l,e):n.call(t,e),e.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function I(e,s,t,n,l){for(;typeof t=="function";)t=t();if(s===t)return t;const i=typeof s,o=n!==void 0;if(e=o&&t[0]&&t[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(s=s.toString(),s===t))return t;if(o){let r=t[0];r&&r.nodeType===3?r.data!==s&&(r.data=s):r=document.createTextNode(s),t=E(e,t,n,r)}else t!==""&&typeof t=="string"?t=e.firstChild.data=s:t=e.textContent=s}else if(s==null||i==="boolean")t=E(e,t,n);else{if(i==="function")return x(()=>{let r=s();for(;typeof r=="function";)r=r();t=I(e,r,t,n)}),()=>t;if(Array.isArray(s)){const r=[],h=t&&Array.isArray(t);if(z(r,s,t,l))return x(()=>t=I(e,r,t,n,!0)),()=>t;if(r.length===0){if(t=E(e,t,n),o)return t}else h?t.length===0?Q(e,r,n):he(e,t,r):(t&&E(e),Q(e,r));t=r}else if(s.nodeType){if(Array.isArray(t)){if(o)return t=E(e,t,n,s);E(e,t,null,s)}else t==null||t===""||!e.firstChild?e.appendChild(s):e.replaceChild(s,e.firstChild);t=s}}return t}function z(e,s,t,n){let l=!1;for(let i=0,o=s.length;i<o;i++){let r=s[i],h=t&&t[e.length],p;if(!(r==null||r===!0||r===!1))if((p=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))l=z(e,r,h)||l;else if(p==="function")if(n){for(;typeof r=="function";)r=r();l=z(e,Array.isArray(r)?r:[r],Array.isArray(h)?h:[h])||l}else e.push(r),l=!0;else{const w=String(r);h&&h.nodeType===3&&h.data===w?e.push(h):e.push(document.createTextNode(w))}}return l}function Q(e,s,t=null){for(let n=0,l=s.length;n<l;n++)e.insertBefore(s[n],t)}function E(e,s,t,n){if(t===void 0)return e.textContent="";const l=n||document.createTextNode("");if(s.length){let i=!1;for(let o=s.length-1;o>=0;o--){const r=s[o];if(l!==r){const h=r.parentNode===e;!i&&!o?h?e.replaceChild(l,r):e.insertBefore(l,t):h&&r.remove()}else i=!0}}else e.insertBefore(l,t);return[l]}var ge=$('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 fill=currentColor viewBox="0 0 16 16"><path d="M0 14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v12zm4.5-6.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5a.5.5 0 0 1 0-1z">');function we(e){return(()=>{var s=ge();return x(()=>D(s,"class",e.className)),s})()}var me=$('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 fill=currentColor viewBox="0 0 16 16"><path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"></path><path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z">');function be(e){return(()=>{var s=me();return x(()=>D(s,"class",e.className)),s})()}var ve=$('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 fill=currentColor viewBox="0 0 16 16"><path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"></path><path fill-rule=evenodd d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z">');function ye(e){return(()=>{var s=ve();return x(()=>D(s,"class",e.className)),s})()}var xe=$('<div class="flex w-full px-1 py-2 bg-gray-100 bg-opacity-50"><select class="flex justify-center items-center px-2 py-1 rounded bg-green-400 hover:bg-green-500 text-white"><option selected>白色底</option><option>红色底</option><option>蓝色底</option></select><button class="flex justify-center items-center px-2 py-1 ml-2 rounded bg-green-400 hover:bg-green-500 active:bg-green-600 text-white"><span class="text-base ml-2">转换'),$e=$('<button class="flex justify-center items-center px-2 ml-2 rounded bg-green-400 hover:bg-green-500 active:bg-green-600 text-white"><span class="text-base ml-2">下载');function Ce(e){return(()=>{var s=xe(),t=s.firstChild,n=t.firstChild,l=n.nextSibling,i=l.nextSibling,o=t.nextSibling,r=o.firstChild;return t.addEventListener("change",h=>e.onChange(h.target.value.split(",").map(p=>Number(p)))),n.value=[255,255,255,255],l.value=[255,0,0,255],i.value=[67,142,219,255],K(o,"click",e.onConvert),y(o,N(ye,{className:"inline-block w-5 h-5"}),r),y(s,(()=>{var h=V(()=>!!e.hasFile());return()=>h()&&(()=>{var p=$e(),w=p.firstChild;return K(p,"click",e.onDownload),y(p,N(be,{className:"inline-block w-4 h-4"}),w),p})()})(),null),s})()}le(["click"]);var Ae=$('<div class="h-full box-border bg-blue-50"><div class="flex flex-col items-start w-full min-w-[56rem] max-w-6xl h-full mx-auto bg-white"><div class="flex items-center justify-between w-full p-10"><div class="flex items-center justify-center w-[22.4rem] h-[31.36rem] p-2 bg-red-50 cursor-pointer"></div><div class="flex items-center justify-center w-[22.4rem] h-[31.36rem] p-2 bg-blue-50">'),W=$('<img class="max-w-full max-h-full">'),Se=$("<span class=select-none>点击选择图片");const M=25;function Ee(){const[e,s]=q(""),[t,n]=q(""),[l,i]=q([255,255,255,255]);let o=document.createElement("img"),r=document.createElement("canvas");const h=async()=>{const a=await(await showOpenFilePicker({types:[{description:"Image",accept:{"image/*":[".png",".jpe",".jpg",".jpeg"]}}]}))[0].getFile(),v=URL.createObjectURL(a);o.src=v,s(v)},p=()=>{if(!e()){alert("请选择图片！");return}r.width=o.width,r.height=o.height;const g=r.getContext("2d");g.drawImage(o,0,0,o.width,o.height);const a=g.getImageData(0,0,o.width,o.height),v=a.data[(4*a.width+4)*4],C=a.data[(4*a.width+4)*4+1],j=a.data[(4*a.width+4)*4+2],_=a.data[(4*a.width+4)*4+3],f=[];for(let c=0;c<a.height;c++)for(let u=0;u<a.width;u++){const L=4*(c*a.width+u);Math.abs(a.data[L]-v)<M&&Math.abs(a.data[L+1]-C)<M&&Math.abs(a.data[L+2]-j)<M&&Math.abs(a.data[L+3]-_)<M&&(u<Math.floor(a.width/2)&&(f.push(4*(c*a.width+(u+1))),f.push(4*(c*a.width+(u+2))),f.push(4*(c*a.width+(u+3)))),u>=Math.ceil(a.width/2)&&(f.push(4*(c*a.width+(u-1))),f.push(4*(c*a.width+(u-2))),f.push(4*(c*a.width+(u-3)))),f.push(4*((c+1)*a.width+u)),f.push(4*((c-1)*a.width+u)),f.push(4*((c+2)*a.width+u)),f.push(4*((c-2)*a.width+u)),f.push(4*((c+1)*a.width+(u+1))),f.push(4*((c-1)*a.width+(u-1))),f.push(4*((c+1)*a.width+(u-1))),f.push(4*((c-1)*a.width+(u+1))),f.push(L))}f.forEach(c=>{const u=l();a.data[c]=u[0],a.data[c+1]=u[1],a.data[c+2]=u[2],a.data[c+3]=u[3]}),g.putImageData(a,0,0),r.toBlob(c=>n(URL.createObjectURL(c)))},w=()=>{const g=document.createElement("a");g.download="新图片.png",g.href=t(),g.click()};return(()=>{var g=Ae(),a=g.firstChild,v=a.firstChild,C=v.firstChild,j=C.nextSibling;return y(a,N(Ce,{hasFile:()=>t()!=="",onChange:i,onConvert:p,onDownload:w}),v),C.$$click=h,y(C,(()=>{var _=V(()=>!!e());return()=>_()?(()=>{var f=W();return x(()=>D(f,"src",e())),f})():Se()})()),y(v,N(we,{className:"w-12 h-12"}),j),y(j,(()=>{var _=V(()=>!!t());return()=>_()&&(()=>{var f=W();return x(()=>D(f,"src",t())),f})()})()),g})()}le(["click"]);de(()=>N(Ee,{}),document.getElementById("app"));
